<html>
  <head>
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="../src/instanced-mesh.js"></script>
    <script src="./framed-block.js"></script>
  </head>
  <body>
    <a-scene stats renderer="colorManagement:true">

      <a-mixin id="shape1" instanced-mesh-member="mesh:#mesh1" scale = "0.5 0.5 0.5"></a-mixin>
      <a-mixin id="shape2" instanced-mesh-member="mesh:#mesh2" scale = "0.5 0.5 0.5"></a-mixin>
      <a-mixin id="shape3" instanced-mesh-member="mesh:#mesh3" scale = "0.5 0.5 0.5"></a-mixin>

    <a-entity id="rig" movement-controls>
      <a-entity id="camera" camera position="0 1.6 0" look-controls>
      </a-entity>
    </a-entity>

    <!-- wall of blocks-->
    <a-text position = "-5 4 -6" color ="black"
       value="This should show an array of 5 columns, 3 rows.
              Yellow blocks with black edging.
              If you look at the code, you
              will see that both meshes and members exist in a
              load of different frames of reference.
              But by using 'world' position option on the instanced meshes,
              these frames of reference are all ignored.
              (Try turning off 'world' position on one or more
              meshes and you'll see everything messes up!)"></a-text>
    <a-entity id="mesh1"
              framed-block="facecolor: yellow; framecolor: black"
              position = "0 0 0"
              instanced-mesh="capacity:5;positioning:world"></a-entity>
    <a-entity id="offset-mesh2"
              position = "1 2 3"
              scale = "1 2 3"
              rotation = "90 90 90">
      <a-entity id="mesh2"
                framed-block="facecolor: yellow; framecolor: black"
                position = "0 0 0"
                instanced-mesh="capacity:5;positioning:world"></a-entity>
      </a-entity>
    </a-entity>
    <a-entity id="offset-mesh3"
              position = "0.1 0.1 0.1">
      <a-entity id="mesh3"
                framed-block="facecolor: yellow; framecolor: black"
                position = "0 0 0"
                instanced-mesh="capacity:5;positioning:world"></a-entity>
    </a-entity>
    <a-entity id ="block0" position = "-2 0 -6" mixin="shape1"></a-entity>
    <a-entity id ="block1" position = "-1 0 -6" mixin="shape2"></a-entity>
    <a-entity id ="block2" position = "0 0 -6" mixin="shape3"></a-entity>
    <a-entity id ="block3" position = "1 0 -6" mixin="shape1"></a-entity>
    <a-entity id ="block4" position = "2 0 -6" mixin="shape2"></a-entity>

    <!-- This set of objects are arranged in a vertical stack, and rotated
         and translated into the correct position by a parent object -->
    <a-entity id="offset-members2"
              position = "2 1 -6"
              rotation = "0 0 90">
        <a-entity id ="block5" position = "0 0 0" mixin="shape3"></a-entity>
        <a-entity id ="block6" position = "0 1 0" mixin="shape1"></a-entity>
        <a-entity id ="block7" position = "0 2 0" mixin="shape2"></a-entity>
        <a-entity id ="block8" position = "0 3 0" mixin="shape3"></a-entity>
        <a-entity id ="block9" position = "0 4 0" mixin="shape1"></a-entity>
    </a-entity>
    <!-- The final set of objects are offset by 10 10 10,
         and the individual element co-ordinates are adjusted so they are still
         in the correct positions-->
    <a-entity id="offset-members2"
              position = "10 10 10">
        <a-entity id ="block10" position = "-12 -8 -16" mixin="shape2"></a-entity>
        <a-entity id ="block11" position = "-11 -8 -16" mixin="shape3"></a-entity>
        <a-entity id ="block12" position = "-10 -8 -16" mixin="shape1"></a-entity>
        <a-entity id ="block13" position = "-9 -8 -16" mixin="shape2"></a-entity>
        <a-entity id ="block14" position = "-8 -8 -16" mixin="shape3"></a-entity>
    </a-entity>
</a-scene>

</body>
